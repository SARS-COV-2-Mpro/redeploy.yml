# ========================
# Cloudflare Wrangler Config
# ========================

# ðŸ‘‡ Worker name â€” must match the service name in your dashboard (exchange-server)
name = "exchange-server"

# ðŸ‘‡ Entry point for your Worker
main = "src/index.js"

# ðŸ‘‡ Cloudflare compatibility date (linked to CF runtime features)
compatibility_date = "2024-03-01"

# ðŸ‘‡ Your Cloudflare account ID (safe to store here)
account_id = "d6846addb712ea8c4283cab3eabf02dc"

# ========================
# D1 Database Binding
# ========================
[[d1_databases]]
binding = "DB"                          # how you access it in code: env.DB
database_name = "exchange_db"           # CF database name
database_id = "c3779437-f414-45f9-9c67-a083880de786"
preview_database_id = "c3779437-f414-45f9-9c67-a083880de786" # same DB in preview mode

# ========================
# Cron Triggers
# ========================
[triggers]
crons = ["*/1 * * * *"]                 # run every 5 minutes

# ========================
# Service Bindings (calling another Worker)
# ========================
[[services]]
binding = "outbound"                    # call it in code with env.outbound.fetch()
service = "outbound-proxy"              # target Worker service name
