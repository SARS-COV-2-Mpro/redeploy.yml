# ========================
# Cloudflare Wrangler Config
# ========================

name = "exchange-server"
main = "index.js"
compatibility_date = "2024-10-01"
account_id = "d6846addb712ea8c4283cab3eabf02dc"

# Make fetch endpoints reachable on *.workers.dev during dev/staging
workers_dev = true
# If you use a custom domain, comment out workers_dev and use routes instead:
# routes = [
#   { pattern = "api.yourdomain.com/*", zone_id = "YOUR_ZONE_ID" }
# ]

# ========================
# OBSERVABILITY
# ========================
[observability]
enabled = true
head_sampling_rate = 1.0

# ========================
# D1 DATABASE
# ========================
[[d1_databases]]
binding = "DB"                          # use in code as env.DB
database_name = "exchange_db"
database_id = "c3779437-f414-45f9-9c67-a083880de786"
preview_database_id = "REPLACE_WITH_YOUR_PREVIEW_DB_ID"  # use a separate preview DB

# ========================
# CRON TRIGGERS
# ========================
[triggers]
crons = ["*/1 * * * *"]                 # run every minute

# ========================
# SERVICES
# ========================
[[services]]
binding = "outbound"                    # use in code as env.outbound.fetch()
service = "outbound-proxy"              # target service name
